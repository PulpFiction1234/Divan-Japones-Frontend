/* ========================================
  GLOBAL RESPONSIVE STYLES
  Mobile-first approach with breakpoints:
  - Mobile: < 768px
  - Tablet: 768px - 1024px
  - Desktop: > 1024px
  ======================================== */

/* ========================================
  BASE LAYOUT ALIGNMENT (ALL BREAKPOINTS)
  Centraliza el ancho y el espaciado del main .layout
  para que todas las p√°ginas partan del mismo contenedor.
  ======================================== */
.layout,
.layout.static-layout,
.category-layout,
.article-layout,
.magazine-layout,
.admin-layout,
.login-layout,
.publications-layout,
.magazine-container,
.category-container,
.activities-container,
.contact-container,
.admin-container {
  width: min(1200px, calc(100% - 3rem));
  margin: 2rem auto 3rem;
  display: flex;
  flex-direction: column;
  gap: 1.5rem;
  padding: 0;
}

/* ========================================
  TABLET AND MOBILE (< 1024px)
  ======================================== */
@media (max-width: 1024px) {
  /* Base container padding */
  .page {
    padding: 0 1.5rem;
  }

  /* Header adjustments */
  .topbar {
    flex-wrap: wrap;
    padding: 0.75rem 1.5rem;
  }

  .topbar__search {
    order: 3;
    width: 100%;
    margin-left: 0;
    margin-top: 0.5rem;
  }

  .topbar__search input {
    flex: 1;
    width: 100%;
  }

  /* Site Header Navigation */
  .site-header__nav ul {
    gap: 1.5rem;
    font-size: 0.8rem;
  }

  /* Menu Section */
  .latest {
    padding: 3rem 1.5rem;
  }

  .latest__grid {
    grid-template-columns: 1fr;
    gap: 2rem;
  }

  .feature-card {
    grid-row: span 1;
    max-height: none;
    min-height: auto;
  }

  .feature-card img,
  .latest-card img {
    aspect-ratio: 16 / 9;
  }

  /* Publications Grid */
  .publications-grid {
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 1.5rem;
  }

  /* Magazine Grid */
  .magazine-grid {
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
  }

  /* Article Layout */
  .article-main {
    grid-template-columns: 1fr;
    gap: 2rem;
  }

  .article-body {
    max-width: none;
  }

  .article-sidebar {
    max-width: none;
  }

  /* Admin Panel */
  .admin-grid {
    grid-template-columns: 1fr;
  }

  .admin-form {
    grid-template-columns: 1fr;
  }
}

/* ========================================
  MOBILE / PHABLET (< 900px)
  ======================================== */
@media (max-width: 900px) {
  /* Prevent horizontal scroll */
  html,
  body {
    max-width: 100vw;
    overflow-x: hidden;
  }

  * {
    max-width: 100%;
  }

  /* Remove side margins for full-width header/footer */
  body {
    margin: 0;
    padding: 0;
  }

  .page {
    padding: 0;
    max-width: 100vw;
    overflow-x: hidden;
  }

  /* Full-width header and footer */
  .topbar,
  .site-header,
  .footer {
    width: 100%;
    margin: 0;
  }

  /* Unify all layouts on mobile to match home */
  .layout,
  .layout.static-layout,
  .category-layout,
  .article-layout,
  .magazine-layout,
  .admin-layout,
  .login-layout,
  .publications-layout,
  .magazine-container,
  .category-container,
  .activities-container,
  .contact-container,
  .admin-container {
    width: calc(100% - 2rem) !important;
    margin: 1rem auto 1.5rem !important;
    gap: 0.5rem !important;
    padding: 0 !important;
  }

  /* Add padding back to content areas */
  .latest,
  .trending,
  .experience {
    padding-left: 1rem;
    padding-right: 1rem;
    width: calc(100% - 2rem);
    margin-left: auto;
    margin-right: auto;
  }

  /* Typography adjustments */
  .section-heading {
    font-size: clamp(1rem, 3.5vw, 1.25rem) !important;
    letter-spacing: 0.18em;
    margin-bottom: 1rem;
  }

  h2 {
    font-size: clamp(1.5rem, 5vw, 2rem);
  }

  h3 {
    font-size: clamp(1.2rem, 4vw, 1.6rem);
  }

  /* Header */
  .topbar {
    padding: 0.75rem 1rem;
    flex-direction: row !important;
    align-items: center !important;
    gap: 0.75rem;
  }

  .topbar__social {
    gap: 0.5rem;
    flex: 0 0 auto;
  }

  .topbar__search {
    flex: 1 1 auto;
    width: auto;
  }

  .topbar__search input {
    width: 100%;
    max-width: none;
  }

  .topbar__social a {
    width: 2rem;
    height: 2rem;
  }

  .topbar__social svg {
    width: 1rem;
    height: 1rem;
  }

  .topbar__admin {
    font-size: 0.6rem;
    padding: 0.4rem 0.8rem;
  }

  /* Site Header */
  .site-header {
    padding: 1.25rem 1rem 1rem;
  }

  /* Keep Instagram icon and search on same line */
  .site-header__top {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    flex-wrap: nowrap;
  }

  .site-header__social {
    flex: 0 0 auto;
  }

  .site-header__search {
    flex: 1 1 auto;
  }

  .site-header__logo {
    font-size: clamp(2rem, 8vw, 3.5rem);
    letter-spacing: 0.15em;
  }

  .site-header__descriptor {
    font-size: 0.7rem;
    letter-spacing: 0.08em;
  }

  .site-header__nav {
    margin-top: 1.5rem;
    padding-top: 0.75rem;
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
  }

  .site-header__nav ul {
    gap: 1.2rem;
    font-size: 0.75rem;
    flex-wrap: nowrap;
    justify-content: flex-start;
    padding: 0 0.5rem;
    min-width: min-content;
  }

  .site-header__nav li {
    white-space: nowrap;
  }

  /* Menu/Latest Section */
  .latest {
    /* reduced vertical padding on mobile to avoid large gaps */
    padding: 1rem 0.75rem;
    margin-bottom: 0.5rem;
  }

  .latest__grid {
    grid-template-columns: 1fr;
    gap: 1rem;
  }

  .feature-card,
  .latest-card {
    /* allow cards to grow with content on small screens */
    min-height: auto;
    max-height: none !important;
    overflow: visible !important;
  }

  .feature-card img,
  .latest-card img {
    aspect-ratio: 4 / 3;
    height: auto;
    width: 100%;
  }

  .feature-card__body,
  .latest-card__body {
    padding: 0.75rem 0 0;
  }

  .feature-card__body h3 {
    font-size: clamp(1.5rem, 5vw, 2rem);
  }

  .latest-card__body h3 {
    font-size: clamp(1.2rem, 4vw, 1.5rem);
  }

  .article-category,
  .feature-card__category,
  .latest-card__category {
    font-size: 0.75rem;
  }

  /* Trending Posts */
  .trending {
    padding: 2rem 1rem;
  }

  .trending__grid {
    grid-template-columns: 1fr;
    gap: 1.5rem;
  }

  .trending-card__media {
    height: 200px;
  }

  .trending-card__body {
    padding: 1.5rem;
  }

  .trending-card h3 {
    font-size: clamp(1.2rem, 4vw, 1.5rem);
  }

  /* Experience/Activities */
  .experience {
    padding: 2rem 1rem;
  }

  .experience-grid {
    grid-template-columns: 1fr;
    gap: 1.5rem;
  }

  .activity-card {
    min-height: auto;
  }

  .activity-card__media {
    height: 250px;
  }

  .publications-grid {
    grid-template-columns: 1fr;
    gap: 2rem;
    overflow-x: hidden;
  }

  .publications-sidebar {
    position: static;
    border: none;
    padding: 0 0 0.5rem;
    margin: 0;
  }

  /* Show mobile dropdown, hide desktop nav */
  .publications-sidebar__mobile {
    display: block;
  }

  .publications-sidebar__desktop {
    display: none;
  }

  .publications-sidebar__select {
    box-sizing: border-box;
  }

  .publications-results {
    overflow-x: hidden;
  }

  .publications-results ul {
    padding: 0;
    margin: 0;
  }

  .publications-card {
    width: 100%;
    max-width: 100%;
  }

  .publications-card__media {
    width: 100%;
    max-width: 100%;
  }

  .publications-card__media img {
    width: 100%;
    max-width: 100%;
    height: auto;
  }

  .publications-header {
    flex-direction: column;
    align-items: flex-start;
    gap: 1rem;
    margin-bottom: 2rem;
  }

  .publications-filters {
    width: 100%;
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
  }

  .publications-filters__list {
    flex-wrap: nowrap;
    gap: 0.75rem;
    padding: 0.5rem 0;
    min-width: min-content;
  }

  .publications-filters__item {
    white-space: nowrap;
  }

  .publications-grid {
    grid-template-columns: 1fr;
    gap: 1.5rem;
  }

  .publications-card {
    min-height: auto;
  }

  .publications-card__media {
    height: 200px;
  }

  /* Magazine Pages */
  .magazine-container {
    padding: 2rem 1rem;
  }

  .magazine-grid {
    grid-template-columns: 1fr;
    gap: 1.5rem;
  }

  .magazine-hero {
    padding: 2rem 1rem;
  }

  .magazine-hero__title {
    font-size: clamp(2rem, 7vw, 2.5rem);
  }

  .magazine-hero__description {
    font-size: 0.95rem;
  }

  .magazine-hero__actions {
    flex-direction: column;
    gap: 0.75rem;
    width: 100%;
  }

  .magazine-hero__btn {
    width: 100%;
    padding: 0.8rem 1.5rem;
  }

  .magazine-sections {
    padding: 2rem 1rem;
  }

  .magazine-sections__grid {
    grid-template-columns: 1fr;
    gap: 1.5rem;
  }

  /* Article Page */
  .article-hero {
    padding: 2rem 1rem;
    min-height: 350px;
  }

  .article-hero__title {
    font-size: clamp(1.8rem, 6vw, 2.2rem);
  }

  .article-hero__meta {
    flex-direction: column;
    align-items: flex-start;
    gap: 0.5rem;
    font-size: 0.85rem;
  }

  .article-body {
    padding: 2rem 1rem;
  }

  .article-body__content {
    font-size: 1rem;
    line-height: 1.7;
  }

  .article-body__content h2 {
    font-size: 1.5rem;
    margin-top: 2rem;
  }

  .article-body__content h3 {
    font-size: 1.3rem;
    margin-top: 1.5rem;
  }

  .article-body__content img {
    margin: 1.5rem 0;
  }

  .article-sidebar {
    padding: 1.5rem 1rem;
  }

  .article-sidebar__card {
    padding: 1.5rem;
    margin-bottom: 1.5rem;
  }

  .article-sidebar__tags {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
  }

  /* Category Page */
  .category-container {
    padding: 2rem 1rem;
  }

  .category-grid {
    grid-template-columns: 1fr;
    gap: 1.5rem;
  }

  .category-grid__media {
    height: 200px;
  }

  /* Footer */
  .footer {
    padding: 2rem 1rem;
  }

  .footer__grid {
    grid-template-columns: 1fr;
    gap: 2rem;
  }

  /* Admin Page */
  .admin-container {
    padding: 1.5rem 1rem;
  }

  .admin-tabs {
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
    margin-bottom: 2rem;
  }

  .admin-tabs__list {
    flex-wrap: nowrap;
    min-width: min-content;
    gap: 0.75rem;
  }

  .admin-form {
    grid-template-columns: 1fr;
  }

  .admin-form__group {
    margin-bottom: 1.5rem;
  }

  .admin-form__actions {
    flex-direction: column;
    gap: 0.75rem;
  }

  .admin-form__actions button {
    width: 100%;
  }

  .admin-list {
    overflow-x: auto;
  }

  /* Contact Page */
  .contact-container {
    padding: 2rem 1rem;
  }

  .contact-form {
    padding: 2rem 1rem;
  }

  .contact-form__fields {
    grid-template-columns: 1fr;
  }

  .contact-form__submit {
    width: 100%;
  }

  /* Activities Page */
  .activities-container {
    padding: 2rem 1rem;
  }

  .activities-header {
    padding: 2rem 1rem;
  }

  .activities-grid {
    grid-template-columns: 1fr;
    gap: 1.5rem;
  }

  /* Author Pill */
  .author-pill {
    flex-direction: row;
    align-items: center;
    gap: 0.75rem;
  }

  .author-pill__avatar {
    width: 50px;
    height: 50px;
  }

  .author-pill__name {
    font-size: 0.85rem;
  }

  /* Magazine Flipbook Modal */
  .flipbook-modal__content {
    padding: 1rem;
    max-width: 100%;
    margin: 0;
    border-radius: 0;
  }

  .flipbook-modal__header {
    flex-direction: column;
    align-items: flex-start;
    gap: 0.75rem;
    margin-bottom: 1rem;
  }

  .flipbook-modal__title {
    font-size: 1.2rem;
  }

  .flipbook-modal__close {
    position: absolute;
    top: 0.5rem;
    right: 0.5rem;
  }

  .flipbook-viewer {
    height: 60vh;
  }
}

/* ========================================
   SMALL MOBILE (< 480px)
   ======================================== */
@media (max-width: 480px) {
  /* Further reduce padding and spacing */
  .topbar {
    padding: 0.5rem 0.75rem;
  }

  .about-section {
    padding: 1.5rem 0.75rem;
  }

  .section-heading {
    font-size: 1.1rem;
    letter-spacing: 0.16em;
  }

  /* Cards */
  .feature-card,
  .latest-card,
  .trending-card,
  .activity-card {
    /* remove enforced tall min-height on very small screens to avoid blank gaps */
    min-height: auto !important;
    max-height: none !important;
    overflow: visible !important;
  }

  /* Ensure grid rows size to content and feature card doesn't span rows on narrow screens */
  .latest__grid {
    grid-auto-rows: auto !important;
    grid-template-columns: 1fr !important;
    gap: 0.9rem !important;
  }

  .latest__grid > .feature-card {
    grid-row: auto !important;
    align-self: stretch !important;
  }

  .feature-card__title {
    font-size: 1.8rem;
  }

  .latest-card__title,
  .trending-card h3 {
    font-size: 1.2rem;
  }

  /* Article */
  .article-hero {
    min-height: 350px;
    padding: 1.5rem 0.75rem;
  }

  .article-body {
    padding: 1.5rem 0.75rem;
  }

  .article-body__content {
    font-size: 0.95rem;
  }

  /* Forms */
  .admin-form__group label,
  .contact-form__field label {
    font-size: 0.9rem;
  }

  .admin-form__group input,
  .admin-form__group textarea,
  .admin-form__group select,
  .contact-form__field input,
  .contact-form__field textarea {
    font-size: 0.95rem;
    padding: 0.6rem;
  }

  /* Buttons */
  button,
  .admin-form__btn,
  .magazine-hero__btn,
  .contact-form__submit {
    font-size: 0.9rem;
    padding: 0.6rem 1rem;
  }
}

/* ========================================
   LANDSCAPE MOBILE (max-height: 500px)
   ======================================== */
@media (max-height: 500px) and (orientation: landscape) {
  .article-hero,
  .magazine-hero,
  .feature-card,
  .activity-card {
    min-height: 250px;
  }

  .flipbook-viewer {
    height: 80vh;
  }
}
